<!DOCTYPE html>
<html lang="en-AU" dir="ltr" class="relative min-h-screen">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=5">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.11.1/dist/cdn.min.js"></script>
    <link href="assets/css/style.css" rel="stylesheet">
</head>

<body class="h-full p-4 overflow-x-hidden font-sans text-base antialiased lg:p-7 bg-off-white text-teal-dark">

    <header>

        <!-- < lg -->
        <div class="flex flex-col gap-y-1 lg:hidden">
            <div class="flex items-center p-4 rounded-t-2xl bg-cream">
                <img alt="Sustainable Salons logo" class="mr-auto" src="assets/images/logo.svg">
                <button>
                    <img class="h-[54px] mt-1 drop-shadow-[0_6px_0_teal] active:drop-shadow-[0_0_0_teal] transition
                        duration-75" src="assets/images/menu-open.svg" role="button" alt="Open navigation menu">
                </button>
            </div>
            <div class="flex gap-2 p-4 bg-cream rounded-b-2xl">
                <button class="button-primary grow">
                    Find a salon
                </button>
                <button class="button-secondary grow">
                    For Salons
                </button>
            </div>
        </div>

        <!-- >= lg -->
        <div class="items-center hidden gap-8 p-8 bg-cream rounded-2xl lg:flex">
            <button class="button-primary h-[51]px">
                Find a salon
            </button>
            <img alt="Sustainable Salons logo" class="mx-auto" src="assets/images/logo-lg.svg">
            <button class="button-secondary h-[51px]">
                For Salons
            </button>
            <button>
                <img class="h-[54px] mt-1 drop-shadow-[0_6px_0_teal] active:drop-shadow-[0_0_0_teal] transition
                    duration-75" src="assets/images/menu-open.svg" role="button" alt="Open navigation menu">
            </button>
        </div>
    </header>

    <main class="py-8 mb-24 grow ">

        <!-- Search component -->
        <div
            class="p-6 bg-center bg-cover border-4 border-solid q-full rounded-3xl border-teal-dark bg-cream lg:bg-locationSearchSquiggle">
            <form action="/search" x-ref="salonsearch" method="get" x-data="
            {
                isValid: false,
                latAndLongFieldsPopulated: () => {
                    return $refs.lat.value && $refs.long.value
                },
                options: [
                    { value: '0', label: 'All salons', topLabel: 'salons', selected: true },
                    { value: '2', label: 'Hairdressers', topLabel: 'hairdressers', selected: false },
                    { value: '3', label: 'Barbers', topLabel: 'barbers', selected: false },
                    { value: '4', label: 'Beauty Parlours', topLabel: 'beauty parlours', selected: false },
                    { value: '5', label: 'Pet Groomers', topLabel: 'pet groomers', selected: false }
                ],
                }">

                <div
                    class="w-full text-base font-semibold text-center sm:text-lg lg:text-2xl md:text-xl text-teal-dark">
                    #1 Directory Platform
                    in the
                    Industry
                    &ndash; not
                    bragging.</div>
                <div x-data="{
                    open: false,
                    close(focusAfter) {
                        if(! this.open) return
                        this.open = false
                        focusAfter && focusAfter.focus()
                    },
                    toggle() {
                        if(this.open) {
                            return this.close()
                        }
                        this.$refs.salonbutton.focus()
                        this.open = true
                    },
                    labelText : 'salons',
                    handleCheck(e) {
                        //console.log('handleCheck', {value: e.target.value, checked: e.target.checked})
                        // if 'all' is checked, uncheck all other options
                        if(e.target.value === '0') {
                            e.target.checked = true
                            this.options[0].selected = true
                            this.options.filter(x => x.value != 0).forEach(option => {
                                console.log('unchecking', option)
                                option.selected = false
                                //console.log(option)
                            })
                        } else {
                            // uncheck the 'all' option
                            this.options[0].selected = false
                        }
                        //console.log(this.options)
                    }
                }" x-on:keydown.escape.prevent.stop="close($refs.salonbutton)"
                    x-on:focusin.window="! $refs.salonpanel.contains($event.target) && $event.target != $refs.salonbutton && close()"
                    x-id="['selectbox']" class="relative">
                    <div
                        class="flex items-baseline w-full mt-3 mb-3 font-semibold  text-teal-dark text-[18px] sm:text-[28px] md:text-[34px] lg:text-[40px]">
                        <span class="hidden md:inline ">Find sustainable&nbsp;</span>
                        <!-- popover button -->
                        <button type="button" x-on:click="toggle()" :aria-expanded="open" x-ref="salonbutton"
                            :aria-controls="$id('selectbox')" type="button"
                            class="flex items-center w-full gap-1.5 text-teal border-b-4 md:w-fit border-mint">
                            <span class="md:hidden">Find</span><span class=""
                                x-text="options.filter(x => x.selected)[0]?.topLabel">salons</span> <span
                                x-show="options.filter(x => x.selected).length > 1">&hellip;</span>
                            <img class="ml-auto"
                                :src="open ? '/assets/images/chevron-up-teal.svg' : '/assets/images/chevron-down-teal.svg'"
                                role="presentation" /></button>
                        <span class="hidden md:inline ">&nbsp;in</span>
                    </div>
                    <!-- salon popover panel -->
                    <div :id="$id('selectbox')" x-cloak x-ref="salonpanel" x-show="open"
                        x-on:click.outside="close($refs.salonbutton)"
                        class="absolute left-0 right-0 flex flex-col items-stretch max-w-sm p-2 mx-4 border-4 z-100 border-teal-dark bg-cream rounded-3xl">
                        <template x-for="option in options">

                            <div class="focus-within:rounded-2xl focus-within:bg-mint" :key="option.value">
                                <label class="flex py-2 m-4 border-b-4 border-mint">
                                    <div class="mr-auto font-semibold" x-text="option.label">options</div>
                                    <!-- input has no "name" attr so it won't be included in the form submission -->
                                    <input @click="handleCheck" x-model:checked="option.selected" :value="option.value"
                                        @pageshow.window="option.selected = $el.checked" type="checkbox"
                                        class="opacity-0 peer salontypecheckbox" />
                                    <img src="/assets/images/checkbox-empty.svg" role="presentation"
                                        class="peer-checked:hidden" />
                                    <img src="/assets/images/checkbox-filled.svg" role="presentation"
                                        class="hidden peer-checked:block" />
                                </label>
                            </div>
                        </template>
                    </div>
                </div>
                <!-- location search -->
                <div class="w-full h-[50px] md:h-[67px] mt-7 relative">
                    <input id="ss_pac_input" type="text" required name="q" placeholder="Suburb or postcode"
                        class="absolute inset-0 py-4 pl-4 pr-20 bg-ivory rounded-2xl focus:rounded-2xl md:rounded-3xl md:focus:rounded-3xl placeholder:text-ui-disabled">
                    <button type="submit" id="locationsubmit" disabled="true"
                        class="absolute bottom-2 top-1 right-1 md:bottom-3 md:top-2 md:right-2 button-primary rounded-xl! ">
                        Find
                    </button>
                </div>
                <input x-ref="lat" type="hidden" name="lat" id="lat">
                <input x-ref="lng" type="hidden" name="lng" id="lng">
                <template x-if="options[0].selected === false">
                    <input type="text" hidden name="type"
                        :value="options.filter(x => x.selected && x.value !== '0').map(x => x.value).join('|')" />
                </template>
            </form>

        </div>


        <!-- lorem -->

        <div class="max-w-prose">
            <h1 class="mt-12 text-3xl font-bold lg:text-5xl">Lorem ipsum dolor sit amet consectetur adipisicing elit.
            </h1>
            <p>
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Nisi perferendis error porro animi provident
                quas!
                In,
                saepe. Provident beatae aspernatur itaque quo unde recusandae perferendis vel officiis, quam placeat
                expedita!
            </p>
            <p>
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Nisi perferendis error porro animi provident
                quas!
                In,
                saepe. Provident beatae aspernatur itaque quo unde recusandae perferendis vel officiis, quam placeat
                expedita!
            </p>
            <p>
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Nisi perferendis error porro animi provident
                quas!
                In,
                saepe. Provident beatae aspernatur itaque quo unde recusandae perferendis vel officiis, quam placeat
                expedita!
            </p>
            <p>
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Nisi perferendis error porro animi provident
                quas!
                In,
                saepe. Provident beatae aspernatur itaque quo unde recusandae perferendis vel officiis, quam placeat
                expedita!
            </p>
        </div>





    </main>

    <footer x-data="{
        width: window.innerWidth,
        breakpoint: 1024,
    }" @resize.window="width = window.innerWidth">
        <div class="bg-teal rounded-2xl 2xl:pr-[640px]">
            <!-- Footer Links -- mobile -->
            <div
                class="flex flex-col px-4 pt-4 text-base font-bold lg:px-20 lg:pt-16 lg:flex-row lg:justify-between md:text-2xl text-off-white ">

                <div class="flex flex-col order-4 lg:grow lg:order-1">
                    <div class="footer-link-container"><a
                            class="grow lg:grow-0 border-b-2 pb-0.5 border-b-mint md:border-b-4 lg:border-b-transparent squiggle-under"
                            href="#">Products</a>
                    </div>
                    <div class="footer-link-container"><a
                            class="grow lg:grow-0 border-b-2 pb-0.5 border-b-mint md:border-b-4" href="#">Stories</a>
                    </div>
                    <div class="footer-link-container"><a
                            class="grow lg:grow-0 border-b-2 pb-0.5 border-b-mint md:border-b-4" href="#">Ponytails</a>
                    </div>
                    <div class="footer-link-container"><a
                            class="grow lg:grow-0 border-b-2 pb-0.5 border-b-mint md:border-b-4" href="#">Get in
                            touch</a></div>
                    <div class="footer-link-container"><a
                            class="grow lg:grow-0 flex gap-4 align-middle border-b-2 pb-0.5 border-b-mint md:border-b-4"
                            href="#"><span>
                                Brand assets
                            </span><img class="ml-auto" src="assets/images/external-link.svg" role="presentation" />
                        </a>
                    </div>
                </div>

                <div x-data="{ open : false }" :aria-controls="$id('submenu')"
                    class="flex flex-col order-2 gap-4 align-middle lg:grow">
                    <div class="footer-link-container">
                        <button :disabled="width > breakpoint" @click="open = !open" type="button" :aria-expanded="open"
                            class="grow lg:grow-0">
                            <div class="flex align-middle border-b-2 pb-0.5 border-b-mint md:border-b-4">
                                <span>About</span>
                                <img class="ml-auto lg:hidden" src="assets/images/chevron-down-white.svg"
                                    role="presentation" />
                            </div>
                        </button>
                    </div>
                    <div :id="$id('submenu')" x-cloak x-show="open || width > breakpoint"
                        class="flex flex-col gap-4 mb-4 lg:gap-1">
                        <div class="">
                            <a class="text-sm font-normal lg:text-base lg:font-semibold " href=" #">
                                Our purpose
                            </a>
                        </div>
                        <div class="">
                            <a class="text-sm font-normal lg:text-base lg:font-semibold " href=" #">
                                Our impact
                            </a>
                        </div>
                        <div class="">
                            <a class="text-sm font-normal lg:text-base lg:font-semibold " href=" #">
                                Our story
                            </a>
                        </div>
                        <div class="">
                            <a class="text-sm font-normal lg:text-base lg:font-semibold " href=" #">
                                Our people
                            </a>
                        </div>
                        <div class="">
                            <a class="text-sm font-normal lg:text-base lg:font-semibold " href=" #">
                                Work with us
                            </a>
                        </div>
                        <div class="">
                            <a class="text-sm font-normal lg:text-base lg:font-semibold " href=" #">
                                Partnerships
                            </a>
                        </div>
                    </div>
                </div>

                <div x-data="{ open : false }" class="flex flex-col order-3 gap-4 align-middle lg:grow">
                    <div class="footer-link-container" :disabled="width > breakpoint">
                        <button type="button" @click="open = !open" :aria-expanded="open"
                            :aria-controls="$id('submenu')" class="grow lg:grow-0">
                            <div class="flex align-middle border-b-2 pb-0.5 border-b-mint md:border-b-4">
                                <span>For salons</span>
                                <img class="ml-auto lg:hidden" src="assets/images/chevron-down-white.svg"
                                    role="presentation" />
                            </div>
                        </button>
                    </div>
                    <div :id="$id('submenu')" x-cloak x-show="open || width > breakpoint"
                        class="flex flex-col gap-4 mb-4 lg:gap-1">
                        <div class="">
                            <a class="text-sm font-normal lg:text-base lg:font-semibold" href="#">
                                How it all works
                            </a>
                        </div>
                        <div class="">
                            <a class="text-sm font-normal lg:text-base lg:font-semibold" href="#">
                                Benefits
                            </a>
                        </div>
                        <div class="">
                            <a class="text-sm font-normal lg:text-base lg:font-semibold" href="#">
                                Our impact
                            </a>
                        </div>
                        <div class="">
                            <a class="text-sm font-normal lg:text-base lg:font-semibold" href="#">
                                Materials
                            </a>
                        </div>
                        <div class="">
                            <a class="text-sm font-normal lg:text-base lg:font-semibold" href="#">
                                Why us?
                            </a>
                        </div>
                        <div class="">
                            <a class="text-sm font-normal lg:text-base lg:font-semibold" href="#">
                                Testimonials
                            </a>
                        </div>
                        <div class="">
                            <a class="text-sm font-normal lg:text-base lg:font-semibold" href="#">
                                FAQ
                            </a>
                        </div>
                        <div class="">
                            <a class="text-sm font-normal lg:text-base lg:font-semibold" href="#">
                                Join
                            </a>
                        </div>
                        <div class="">
                            <a class="text-sm font-normal lg:text-base lg:font-semibold" href="#">
                                Login
                            </a>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Social media -->
            <div
                class="px-4 lg:px-20 flex items-center py-8 justify-between lg:justify-start text-off-white gap-2.5 lg:gap-8 lg:-mt-16">
                <div class="shrink-0 ">Follow our journey</div>
                <a class="shrink-0 " link="#"><img src="assets/images/social-youtube.svg" role="link"
                        alt="YouTube" /></a>
                <a class="shrink-0 " link="#"><img src="assets/images/social-insta.svg" role="link"
                        alt="Instagram" /></a>
                <a class="shrink-0 " link="#"><img src="assets/images/social-linkedin.svg" role="link"
                        alt="LinkedIn" /></a>
                <a class="shrink-0 " link="#"><img src="assets/images/social-facebook.svg" role="link"
                        alt="Facebook" /></a>
            </div>

            <!-- Newsletter signup -->
            <div class="left-auto 2xl:bottom-0 2xl:right-14 2xl:absolute">
                <div class="relative p-0 h-[656px] lg:h-[700px] 2xl:h-[760px] overflow-hidden text-teal-dark ">
                    <!-- place img assets/images/green-afro-cropped.png to be 724px high and cropped at the parent width -->
                    <img class="object-cover  mx-auto w-auto -mb-28  h-[656px] lg:h-[700px] lg:max-h-[700px] 2xl:h-[760px] 2xl:max-h-[760px] max-h-[656px]"
                        src="assets/images/green-afro-cropped.png" alt="Green afro" />
                    <div class="absolute inset-0 p-4 pt-20 ">
                        <div
                            class="flex flex-col items-center max-w-[400px] lg:max-w-[440px] 2xl:max-w-[480px] mx-auto mt-4 sm:mt-8 2xl:mt-20 z-10">
                            <div class="text-3xl font-bold leading-8 text-center lg:text-4xl">No hairy business in this
                                newsletter
                            </div>
                            <div class="pt-6 leading-5 text-center">We only send you stuff that makes you feel good.
                            </div>
                            <!-- disable submit if form is not valid -->
                            <form x-ref="subscribeForm" class="w-full mt-2" x-data="{isValid : false}">
                                <input type="text" name="name" placeholder="Name" required
                                    @input="isValid = $refs.subscribeForm.checkValidity()"
                                    class="w-full bg-ivory h-[50px] md:h-[67px] mt-4 p-4 rounded-2xl focus:rounded-2xl md:rounded-3xl md:focus:rounded-3xl  placeholder:text-ui-disabled">
                                <div class="w-full h-[50px] md:h-[67px]  mt-4 relative">
                                    <input type="email" required name="email" placeholder="Email"
                                        @input="isValid = $refs.subscribeForm.checkValidity()"
                                        class="absolute inset-0 py-4 pl-4 bg-ivory pr-36 rounded-2xl focus:rounded-2xl md:rounded-3xl md:focus:rounded-3xl placeholder:text-ui-disabled">
                                    <button type="submit" :disabled="!isValid"
                                        class="absolute bottom-2 top-1 right-1 md:bottom-3 md:top-2 md:right-2 button-primary rounded-xl! ">
                                        Subscribe
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div
            class="flex flex-wrap justify-center mt-4 lg:justify-between 2xl:mt-8 2xl:pl-32 gap-y-4 gap-x-20 2xl:gap-x-32">
            <a href="#">Terms & Conditions</a>
            <a href="#">Copyright</a>
            <a href="#">Privacy Policy</a>
            <a href="#" class="2xl:ml-auto">Proudly made by TMRRW™️ Studio</a>
        </div>
    </footer>

    <script async
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAcrds5dIlEY-wupBGOfZvMNZSF5o1s97Q&libraries=places&callback=pacInit"></script>
    <script src="assets/js/main.js" defer></script>
    <script>
        function pacInit() {
            const input = document.getElementById('ss_pac_input');
            const options = {
                fields: [
                    'address_components',
                    'formatted_address',
                    'geometry.location',
                    'name',
                    'icon',
                    'place_id'
                ],
                strictBounds: false,
                types: ['geocode'],
            };
            const autocomplete = new google.maps.places.Autocomplete(input, options);

            // When typing a new query
            input.addEventListener('input', function (e) {
                e.preventDefault();

                // Clear coordinates
                document.getElementById('lat').value = '';
                document.getElementById('lng').value = '';
                document.getElementById('locationsubmit').disabled = true;
            });

            autocomplete.addListener('place_changed', function () {
                // Get newly selected place
                let place = autocomplete.getPlace();

                // If a valid geometry was found
                if (place.geometry ?? false) {
                    // Get new address info
                    let coords = place.geometry.location;
                    // Get coordinates
                    let lat = parseFloat(coords.lat().toFixed(7)) || null;
                    let lng = parseFloat(coords.lng().toFixed(7)) || null;
                    // Set coordinates
                    document.getElementById('lat').value = lat;
                    document.getElementById('lng').value = lng;
                    document.getElementById('locationsubmit').disabled = false;
                } else {
                    // Emit warning
                    console.warn('Unable to get place geometry');
                }
            });

            // Prevent address selection from attempting to submit the form
            google.maps.event.addDomListener(input, 'keydown', (event) => {
                if (event.keyCode === 13) {
                    event.preventDefault();
                }
            });
        }
        window.pacInit = pacInit;
    </script>
</body>

</html>